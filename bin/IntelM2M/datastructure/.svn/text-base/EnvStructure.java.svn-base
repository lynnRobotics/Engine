package IntelM2M.datastructure;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;


public class EnvStructure {
	
	
	public static  ArrayList<String> activityList; 
	public static Map<String, ArrayList<String>> sensorStatus; //<name,on standby..> 
	public static  Map<String, SensorNode> sensorList; //<type_id,SensorNode>
	public static Map<String, RelationTable> actAppList ;
	public static HashSet<String> roomList ;
	public static  Map<String, String> sensorState;
    public static boolean[] actPreState;

    static{
    	read();
    }
	
    public static void read(){
		XMLHandler xml= new XMLHandler();
		activityList=xml.getActList();
		sensorList=xml.getSensorList();
		sensorStatus=xml.getSensorStatus();
		actAppList=xml.getActAppList();
		roomList=buildRoomList();
		actPreState=buildactPreState();
		sensorState=buildSensorState();
    }
	public EnvStructure(){

	}
	
	static HashSet<String> buildRoomList(){
    	/*Build room list  */
	    Set<String> acts = actAppList.keySet(); //record all activity
	    HashSet<String> roomList = new HashSet<String>(); //record all  room
	    for(String act:acts)
	    {
	    	String[] split = act.split("_");
	    	roomList.add(split[0]);
	    }
	    return roomList;
	}
	
	static boolean[] buildactPreState(){
		boolean[] actPreState = new boolean[activityList.size()];
		 Arrays.fill(actPreState, false);
		return actPreState;
	}
	
	static Map<String, String> buildSensorState(){
		Map<String, String> sensorState= new HashMap<String, String>();
		return sensorState;
	}

}
